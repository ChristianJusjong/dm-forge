<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Monster Browser - Dungeon Master Forge</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link
    href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;600;700&family=Lato:wght@300;400;700&display=swap"
    rel="stylesheet">
  <link rel="stylesheet" href="styles.css">
  <link rel="stylesheet" href="design-system.css">
  <link rel="stylesheet" href="medieval-theme.css">
  <link rel="stylesheet" href="responsive-design.css">
  <link rel="stylesheet" href="global-overrides.css">
  <link rel="manifest" href="manifest.json">
</head>

<body>
  <div id="app">
    <!-- Navigation will be inserted here by nav.js -->

    <!-- Monster Browser Content -->
    <main class="page-content">
      <div class="page-header">
        <h1 class="page-title">üêâ <span data-i18n="monsterBrowser">Monster Browser</span></h1>
        <p class="page-subtitle">Browse D&D 5e SRD monsters with D&D Beyond links</p>
      </div>

      <!-- Search Bar -->
      <div class="card" style="margin-bottom: 2rem;">
        <div class="input-group" style="margin-bottom: 0;">
          <label class="input-label" data-i18n="searchMonsters">Search Monsters</label>
          <div style="display: flex; gap: var(--space-sm); align-items: center;">
            <input id="monster-search" type="text" placeholder="e.g., goblin, dragon..." class="input"
              style="margin-bottom: 0;">
            <button id="search-btn" class="btn" style="white-space: nowrap;">üîç <span
                data-i18n="search">Search</span></button>
          </div>
        </div>
      </div>

      <!-- Monsters Grid -->
      <div id="monsters-grid" class="monsters-grid">
        <!-- Monsters will be rendered here -->
      </div>

      <div id="loading" class="loading" style="display: none;">
        ‚è≥ Loading monsters...
      </div>

      <div id="no-monsters" class="empty-state" style="display: none;">
        <p data-i18n="noMonstersFound">No monsters found. Try a different search!</p>
      </div>

      <!-- Monster Details Modal -->
      <div id="monster-modal" class="modal-overlay" style="display: none;">
        <div class="modal large">
          <h2 id="monster-name"></h2>
          <p id="monster-type" style="font-style: italic; color: var(--text-secondary);"></p>

          <div class="card" style="margin-top: 1.5rem;">
            <div
              style="display: grid; grid-template-columns: repeat(auto-fit, minmax(100px, 1fr)); gap: 1rem; text-align: center;">
              <div>
                <div style="font-size: 0.9rem; color: var(--text-secondary);">AC</div>
                <div id="monster-ac" style="font-size: 1.5rem; font-weight: 700; color: var(--gold);"></div>
              </div>
              <div>
                <div style="font-size: 0.9rem; color: var(--text-secondary);">HP</div>
                <div id="monster-hp" style="font-size: 1.5rem; font-weight: 700; color: var(--gold);"></div>
              </div>
              <div>
                <div style="font-size: 0.9rem; color: var(--text-secondary);">CR</div>
                <div id="monster-cr" style="font-size: 1.5rem; font-weight: 700; color: var(--gold);"></div>
              </div>
            </div>
          </div>

          <div id="monster-stats" style="margin-top: 1.5rem;"></div>

          <div class="modal-actions" style="margin-top: 2rem;">
            <a id="dndbeyond-link" href="#" target="_blank" class="btn btn-secondary">üìñ View on D&D Beyond</a>
            <button id="close-modal-btn" class="btn" data-i18n="close">Close</button>
          </div>
        </div>
      </div>
    </main>
  </div>

  <script src="storage-utils.js"></script>
  <script type="module" src="auth.js"></script>
  <script type="module" src="translations.js"></script>
  <!-- SEO Injector -->
  <script type="module">
    import { initSeo } from './seo.ts';
    initSeo();
  </script>
  <script type="module" src="campaign-manager.ts"></script>
  <script type="module" src="nav.js"></script>
  <script type="module" src="ads.js"></script>
  <script>
    // Wait for modules to load
    window.addEventListener('load', () => {
      // Require authentication
      if (typeof requireAuth === 'function' && !requireAuth()) {
        throw new Error('Authentication required');
      }

      // Lazy load monster logic
      import('./monsters.js').then(module => {
        module.initMonsters();
      }).catch(err => {
        console.error('Failed to load monsters module:', err);
      });
    });
  </script>
</body>

</html>